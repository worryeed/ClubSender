# X‑Poker GUI Client

Кроссплатформенный GUI-клиент для авторизации в X‑Poker и отправки заявок в клубы. Состоит из графического интерфейса (PyQt6) и ядра (HTTP + TCP клиенты) с реализацией протокола.

## Быстрый старт

- Установите зависимости:
  ```bash path=null start=null
  pip install -r requirements.txt
  ```
- Запустите приложение:
  ```bash path=null start=null
  python main.py
  ```

Требуется Python 3.11+.

## Конфигурация

- Директория `files/` — артефакты запуска:
  - `files/settings.json` — общие параметры (API URL, TCP host/port, таймауты, режимы).
  - `files/xpoker_settings.json` — аккаунты/клубы и параметры UI (создаётся автоматически; игнорируется в git).
  - `logs/xpoker_gui.log` — ротационный лог GUI.

## Структура проекта

- Поле сообщения заявки: в GUI есть поле с ограничением до 40 символов (UTF‑8), текст отправляется в ApplyClubREQ.

- `main.py` — точка входа GUI (PyQt6): управление аккаунтами и клубами, запуск задач, журнал, экспорт отчёта.
- `core/` — ядро:
  - `api.py` — HTTP клиент (логин/refresh/logout, прокси, генерация подписи, интеграция с TCP).
  - `client.py` — TCP клиент (соединение, tcp_login, heartbeat, message pump, get_club_desc/apply_club, строгий bootstrap).
  - `protocol.py` — varint, BE32 фрейминг, сборка и патчинг пакетов.
  - `constants.py` — константы, ID сообщений, шаблоны пакетов.
  - `protobuf_decoder.py` — декодирование ответов (club/apply) без .proto.
  - `models.py` — модели данных (Account, JoinResult, …).
  - `messages.py` — текстовые сообщения/форматирование.
  - `proxy_utils.py` — автоопределение типа прокси и нормализация.

Дополнительно: краткая спецификация протокола — `docs/PROTOCOL.md`.

## Логи и отчёты

- GUI пишет журнал в консоль; при необходимости включите/измените конфигурацию `logging` в `main.py`.
- Результаты вступлений доступны в GUI и могут быть экспортированы в Excel.

## Безопасность

Не храните реальные логины/пароли/токены в репозитории. Файл `xpoker_settings.json` с чувствительными данными игнорируется `.gitignore`.
